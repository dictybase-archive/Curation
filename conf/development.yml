organism:
    discoideum: 
        prefix : DDB
        site_name : dictyBase

signup : 1

gene:
    linkout : /gene/
    gbrowse :
        version : 2
        tracks:
            - Gene
            - dictyBase
            - Predictions
            - Repredictions
            - tRNA
            - ncRNA
            - ESTs
            - RNAseq
        padding : 1000
        width : 300
        link_url : http://testdb.dictybase.org/tools/gbrowse2
        img_url  : http://testdb.dictybase.org/tools/gbrowse_img
    
    fasta:
        padding : 1000
        features:
            - type   : mRNA
              source : Sequencing Center
              style  : FGCOLOR red
              subfeature : exon
            - type   : mRNA
              source : geneID reprediction
              style  : FGCOLOR blue
              subfeature : exon
            - type   : mRNA
              source : dictyBase Curator
              style  : BGCOLOR yellow
              subfeature : exon
            - type   : EST
              style  : text-decoration: underline
              subfeature : nucleotide_match
            - type   : pseudogene
              style  : BGCOLOR lightgrey
              subfeature : pseudogenic_exon
    
    blink :
        url : http://www.ncbi.nlm.nih.gov/sutils/blink.cgi?pid=
    
    blast :
        features:
            - type   : mRNA
              source : dictyBase Curator
              relationship : part_of   
              default : 1
              title : Curated model            
            - type   : mRNA
              source : Sequencing Center
              relationship : part_of   
              default : 1
              title : Sequencing center model
            - type   : mRNA
              source : geneID reprediction
              title: geneID reprediction
        report_url : http://192.168.60.10/tools/blast/run
        format_report_url : http://192.168.60.10/tools/blast/report
        parameters :
            - database : purpureum_protein.fas
              name : D.purpureum
              evalue : 0.1
              filter : T
              gapped : T
              limit  : 5
              matrix : BLOSUM62
              program : blastp
              wordsize : 3
              default : 1
            - database : fasciculatum_protein.fas
              name: D.fasciculatum
              evalue : 0.1
              filter : T
              gapped : T
              limit  : 5
              matrix : BLOSUM62
              program : blastp
              wordsize : 3
            - database : pallidum_protein.fas
              name : P.pallidum
              evalue : 0.1
              filter : T
              gapped : T
              limit  : 5
              matrix : BLOSUM62
              program : blastp  
              wordsize : 3                  
            - database : dicty_primary_protein
              name: D.discoideum
              evalue : 0.1
              filter : T
              gapped : T
              limit  : 5
              matrix : BLOSUM62
              program : blastp
    
    curation:
        features:
            - type   : mRNA
              source : Sequencing Center
              relationship : part_of   
              default : 1  
              title : Sequencing center model
            - type   : mRNA
              source : geneID reprediction
              title: geneID reprediction            
        qualifiers:
            - type : derived from
              name : Derived from
              values: 
                  - gene prediction
                  - gene sequence
                  - curator inference
              default: gene prediction
            - type : supported by
              name : Supported by
              values :
                  - ESTs
                  - sequence similarity
                  - genomic context
                  - unpublished transcript sequence
            - type : qualifier
              name : Notes
              values: 
                  - Incomplete support
                  - Conflicting evidence
    
    protein:
        url : http://192.168.60.10/tools/fasta
        features:
            - type   : mRNA
              source : dictyBase Curator
              default : 1
              title : Curated model         
              relationship : part_of   
            - type   : mRNA
              source : Sequencing Center
              default : 1
              title : Sequencing center model
              relationship : part_of
            - type   : mRNA
              source : geneID reprediction
              title :  geneID reprediction
    

reference: 
    linkout : /publication/

database:
    dsn: dbi:Oracle:host=192.168.60.10;sid=dictybase
    user: CGM_CHADO
    pwd: CGM_CHADO
    attr: 
        LongReadLen: 10000
        AutoCommit: 1
    stats: stats.db

cache:
    cleanup_url: http://192.168.60.10/cache/gene/

stats:
    tables:
        - table: stats
          name: Weekly stats
          columns:
                - column: timecreated
                - column: curated
                  name: 'Curated gene models'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.v_verified_gene_features v
                    INNER JOIN cgm_chado.organism o ON o.organism_id = v.organism_id
                    WHERE o.common_name = 'dicty'
                - column: curated_incomplete_support
                  name: 'Curated gene models, incomplete support'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.v_verified_gene_features v
                    INNER JOIN cgm_chado.featureprop p ON p.feature_id=v.feature_id
                    INNER JOIN cgm_chado.organism o    ON o.organism_id = v.organism_id
                    WHERE o.common_name = 'dicty'
                    AND (p.value LIKE 'genomic context' OR p.value LIKE 'Incomplete support')
                - column: pseudogenes
                  name: 'Pseudogenes'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.v_notdeleted_feature f
                    INNER JOIN cgm_chado.organism o    ON o.organism_id = f.organism_id
                    INNER JOIN cgm_chado.cvterm ct     ON ct.cvterm_id = f.type_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.name         = 'pseudogene'
                - column: alternate_transcripts
                  name: 'Alternate transcripts'
                  sql: |
                    SELECT COUNT(*) AS c FROM
                    (SELECT g.feature_id FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.feature_relationship fr ON g.feature_id = fr.object_id
                    INNER JOIN v_verified_gene_features m        ON m.feature_id = fr.subject_id
                    INNER JOIN cgm_chado.organism o              ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    GROUP BY g.feature_id HAVING COUNT(m.feature_id) > 1)              
                - column: comprehensively_annotated
                  name: 'Genes comprehencively annotated'
                  sql: |
                    SELECT COUNT (fp.feature_id) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.featureprop fp ON fp.feature_id = g.feature_id
                    INNER JOIN cgm_ddb.paragraph p      ON TO_NUMBER(TO_NCHAR(fp.value)) = p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct      ON fp.type_id = ct.cvterm_id
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.name         = 'paragraph_no' 
                    AND p.paragraph_text LIKE '%comprehensively annotated%'
                - column: basic_annotations
                  name: 'Basic annotations'
                  sql: |
                    SELECT COUNT (fp.feature_id) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.featureprop fp ON fp.feature_id = g.feature_id
                    INNER JOIN cgm_ddb.paragraph p      ON TO_NUMBER(TO_NCHAR(fp.value)) = p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct      ON fp.type_id     = ct.cvterm_id
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.name         = 'paragraph_no' 
                    AND p.paragraph_text LIKE '%Basic annotations%'
                - column: genes_descriptions
                  name: 'Genes with descriptions'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.featureprop fp ON fp.feature_id = g.feature_id
                    INNER JOIN cgm_chado.cvterm ct      ON ct.cvterm_id = fp.type_id
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.name         = 'description'                
                - column: gene_name_descriptions
                  name : 'Genes with name descriptions'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.featureprop fp ON fp.feature_id = g.feature_id
                    INNER JOIN cgm_chado.cvterm ct      ON ct.cvterm_id = fp.type_id
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.name     = 'name description'                
                - column: summary
                  name: 'Genes with summary'
                  sql: |
                    SELECT count(*) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.featureprop fp ON fp.feature_id  = g.feature_id
                    INNER JOIN cgm_chado.cvterm ct      ON fp.type_id = ct.cvterm_id
                    INNER JOIN cgm_ddb.paragraph p      ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.name        = 'paragraph_no'
                    AND NOT REGEXP_LIKE(p.paragraph_text, '<summary( paragraph_no="[[:digit:]]*")*>(<curation_status|\[Curation Status)')
                - column: gene_prodicts 
                  name: 'Genes with gene product (manual + electronic)'
                  sql: |
                    SELECT COUNT (DISTINCT g.feature_id) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_ddb.locus_gp gp      ON gp.locus_no = g.feature_id
                    INNER JOIN cgm_ddb.gene_product g   ON g.gene_product_no = gp.gene_product_no
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id 
                    WHERE o.common_name = 'dicty'
                - column: manual_gene_products
                  name: 'Genes with manual gene product'
                  sql: |
                    SELECT COUNT (DISTINCT g.feature_id) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_ddb.locus_gp lgp     ON lgp.locus_no = g.feature_id
                    INNER JOIN cgm_ddb.gene_product gp  ON gp.gene_product_no = lgp.gene_product_no
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ( NOT gp.is_automated=1 OR gp.is_automated IS NULL) 
                - column: unknown_gene_product
                  name: 'Genes with "unknown" gene product'
                  sql: |
                    SELECT COUNT (DISTINCT g.feature_id) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_ddb.locus_gp lgp     ON lgp.locus_no = g.feature_id
                    INNER JOIN cgm_ddb.gene_product gp  ON gp.gene_product_no = lgp.gene_product_no
                    INNER JOIN cgm_chado.organism o     ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND gp.gene_product = 'unknown'
                - column: go_annotations
                  name: 'Total GO annotations'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.v_gene_features g 
                    INNER JOIN cgm_chado.feature_cvterm fc ON fc.feature_id = g.feature_id
                    INNER JOIN cgm_chado.cvterm ct         ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                ON ct.cv_id = cv.cv_id
                    INNER JOIN cgm_chado.organism o        ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.is_obsolete  = 0
                    AND cv.name  IN ('molecular_function', 'biological_process', 'cellular_component')
                - column: non_iea_go
                  name: 'Non IEA GO'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.v_gene_features g 
                    INNER JOIN cgm_chado.feature_cvterm fc      ON g.feature_id = fc.feature_id
                    INNER JOIN cgm_chado.cvterm ct              ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                     ON ct.cv_id = cv.cv_id
                    INNER JOIN cgm_chado.feature_cvtermprop fcp ON fcp.feature_cvterm_id = fc.feature_cvterm_id
                    INNER JOIN cgm_chado.cvterm fcpc            ON fcp.type_id = fcpc.cvterm_id
                    INNER JOIN cgm_chado.cv fcv                 ON fcpc.cv_id = fcv.cv_id
                    INNER JOIN cgm_chado.organism o             ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                    AND ct.is_obsolete  = 0
                    AND cv.name  IN ('molecular_function', 'biological_process', 'cellular_component')
                    AND fcv.name LIKE 'evidence_code%'
                    AND fcpc.name NOT LIKE 'inferred from electronic annotation'
                - column: genes_with_go
                  name: 'Genes with GO'
                  sql: |
                    SELECT COUNT( DISTINCT g.feature_id ) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.feature_cvterm fc  ON g.feature_id = fc.feature_id
                    INNER JOIN cgm_chado.cvterm ct          ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                 ON ct.cv_id = cv.cv_id
                    INNER JOIN cgm_chado.organism o         ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                    AND ct.is_obsolete  = 0
                    AND cv.name  IN ('molecular_function', 'biological_process', 'cellular_component')
                - column: genes_with_exp
                  name: 'Genes wth EXP'
                  sql: |
                    SELECT COUNT( DISTINCT g.feature_id ) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.feature_cvterm fc      ON g.feature_id = fc.feature_id
                    INNER JOIN cgm_chado.cvterm ct              ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                     ON ct.cv_id = cv.cv_id
                    INNER JOIN cgm_chado.feature_cvtermprop fcp ON fcp.feature_cvterm_id = fc.feature_cvterm_id
                    INNER JOIN cgm_chado.cvterm fcpc            ON fcp.type_id = fcpc.cvterm_id
                    INNER JOIN cgm_chado.cv fcv                 ON fcpc.cv_id = fcv.cv_id
                    INNER JOIN cgm_chado.organism o             ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                    AND ct.is_obsolete  = 0
                    AND cv.name  IN ('molecular_function', 'biological_process', 'cellular_component')
                    AND fcv.name LIKE 'evidence_code%'
                    AND fcpc.name IN ('inferred from mutant phenotype', 'inferred from genetic interaction', 'inferred from physical interaction', 'inferred from direct assay')
                - column: fully_go_annotated_genes
                  name: 'Fully GO annotated genes, manually, all three aspects'
                  sql: |
                    SELECT COUNT( DISTINCT g.feature_id ) AS c FROM cgm_chado.v_gene_features g 
                    INNER JOIN cgm_chado.organism o ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                    AND EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_cvterm fc
                    INNER JOIN cgm_chado.cvterm ct              ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                     ON ct.cv_id = cv.cv_id
                    INNER JOIN cgm_chado.feature_cvtermprop fcp ON fc.feature_cvterm_id = fcp.feature_cvterm_id
                    INNER JOIN cgm_chado.cvterm fcpc            ON fcp.type_id = fcpc.cvterm_id
                    INNER JOIN cgm_chado.cv fcv                 ON fcpc.cv_id = fcv.cv_id
                    WHERE fc.feature_id = g.feature_id
                    AND ct.is_obsolete  = 0
                    AND cv.name         = 'molecular_function'
                    AND fcv.name LIKE 'evidence_code%'
                    AND fcpc.name NOT LIKE 'inferred from electronic annotation'
                    )
                    AND EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_cvterm fc
                    INNER JOIN cgm_chado.cvterm ct              ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                     ON ct.cv_id = cv.cv_id
                    INNER JOIN cgm_chado.feature_cvtermprop fcp ON fc.feature_cvterm_id = fcp.feature_cvterm_id
                    INNER JOIN cgm_chado.cvterm fcpc            ON fcp.type_id = fcpc.cvterm_id
                    INNER JOIN cgm_chado.cv fcv                 ON fcpc.cv_id = fcv.cv_id
                    WHERE fc.feature_id = g.feature_id
                    AND ct.is_obsolete  = 0
                    AND cv.name         = 'biological_process'
                    AND fcv.name LIKE 'evidence_code%'
                    AND fcpc.name NOT LIKE 'inferred from electronic annotation'
                    )
                    AND EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_cvterm fc
                    INNER JOIN cgm_chado.cvterm ct              ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                     ON ct.cv_id = cv.cv_id
                    INNER JOIN cgm_chado.feature_cvtermprop fcp ON fc.feature_cvterm_id = fcp.feature_cvterm_id
                    INNER JOIN cgm_chado.cvterm fcpc            ON fcp.type_id = fcpc.cvterm_id
                    INNER JOIN cgm_chado.cv fcv                 ON fcpc.cv_id = fcv.cv_id
                    WHERE fc.feature_id = g.feature_id
                    AND ct.is_obsolete  = 0
                    AND cv.name         = 'cellular_component'
                    AND fcv.name LIKE 'evidence_code%'
                    AND fcpc.name NOT LIKE 'inferred from electronic annotation'
                    )
                - column: fully_go_annotated_genes_iea
                  name: 'Fully GO annotated genes (incl. IEAs)'
                  sql: |
                    SELECT COUNT( DISTINCT g.feature_id ) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.organism o ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                    AND EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_cvterm fc
                    INNER JOIN cgm_chado.cvterm ct ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv        ON ct.cv_id = cv.cv_id
                    WHERE fc.feature_id = g.feature_id 
                    AND cv.name         = 'molecular_function' 
                    AND ct.is_obsolete  = 0
                    )
                    AND EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_cvterm fc
                    INNER JOIN cgm_chado.cvterm ct ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv        ON ct.cv_id = cv.cv_id
                    WHERE fc.feature_id = g.feature_id 
                    AND cv.name         = 'biological_process' 
                    AND ct.is_obsolete  = 0
                    )
                    AND EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_cvterm fc
                    INNER JOIN cgm_chado.cvterm ct ON fc.cvterm_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv        ON ct.cv_id = cv.cv_id
                    WHERE fc.feature_id = g.feature_id 
                    AND cv.name         = 'cellular_component' 
                    AND ct.is_obsolete  = 0
                    )
                - column: strains
                  name: 'Total strains'
                  sql: |
                    SELECT count(*) AS c FROM cgm_ddb.stock_center
                - column: genes_wth_strains
                  name: 'Genes with strain(s)'
                  sql: |
                    SELECT count (DISTINCT fg.feature_id) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.feature_genotype fg ON fg.feature_id = g.feature_id
                    INNER JOIN cgm_chado.organism o          ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                - column: strains_with_genes
                  name: 'Strains with genes associated'
                  sql: |
                    SELECT count (DISTINCT fg.genotype_id) AS c FROM cgm_chado.v_gene_features g
                    INNER JOIN cgm_chado.feature_genotype fg ON fg.feature_id = g.feature_id
                    INNER JOIN cgm_chado.organism o          ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                - column: phenotypes
                  name: 'Total phenotypes'
                  sql: |
                    SELECT count(*) as c FROM cgm_chado.phenotype p
                - column: genes_with_phenotypes
                  name: 'Genes with phenotype(s)'
                  sql: | 
                    SELECT COUNT(DISTINCT g.feature_id) AS c FROM cgm_chado.v_gene_features g 
                    INNER JOIN cgm_chado.feature_genotype fg ON g.feature_id = fg.feature_id
                    INNER JOIN cgm_chado.phenstatement ph    ON ph.genotype_id = fg.genotype_id
                    INNER JOIN cgm_chado.organism o          ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty'
                - column: papers_curated
                  name: 'Curated papers'
                  sql: |
                    SELECT COUNT( DISTINCT fp.pub_id ) AS c
                    FROM cgm_chado.feature_pub fp
                    WHERE EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_pubprop fpp
                    INNER JOIN cgm_chado.cvterm ct ON fpp.type_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv        ON ct.cv_id = cv.cv_id
                    WHERE fp.feature_pub_id = fpp.feature_pub_id
                    AND cv.name             ='dictyBase_literature_topic')
                - column: papers_not_curated
                  name: 'Not yet curated papers'
                  sql: |
                    SELECT COUNT(*) AS c FROM cgm_chado.feature_pub fp
                    INNER JOIN cgm_chado.pub p      ON fp.pub_id = p.pub_id
                    INNER JOIN v_gene_features g    ON g.feature_id = fp.feature_id
                    INNER JOIN cgm_chado.organism o ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND p.pubplace not in ('GENBANK','Curator')
                    AND NOT EXISTS
                    (SELECT 'a' FROM cgm_chado.feature_pubprop fpp
                    INNER JOIN cgm_chado.cvterm ct ON fpp.type_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv        ON ct.cv_id             = cv.cv_id
                    WHERE fp.feature_pub_id = fpp.feature_pub_id
                    AND cv.name             ='dictyBase_literature_topic')
                - column: community_annotations
                  name: 'Community annotations'
                  sql: | 
                    SELECT COUNT(*) AS c FROM cgm_chado.featureprop fp
                    WHERE fp.value LIKE 'Has Wiki Page'
        
        - table: curation_stats
          name: Stats by curator
          columns:
                - column: timecreated
                  name: 'Date'
                - column: curator
                  name: 'Curator'
                - column: curated
                  name: 'Curated gene models' 
                  sql: |
                    SELECT COUNT(*) AS c, f.created_by AS curator
                    FROM cgm_chado.v_verified_gene_features f
                    INNER JOIN cgm_chado.organism o ON o.organism_id = f.organism_id
                    WHERE o.common_name = 'dicty' 
                    GROUP BY f.created_by
                - column: pseudogenes
                  name: 'Pseudogenes'
                  sql: |
                    SELECT COUNT(*) AS c, f.created_by AS curator
                    FROM cgm_chado.v_notdeleted_feature f
                    INNER JOIN cgm_chado.cvterm ct  ON ct.cvterm_id = f.type_id
                    INNER JOIN cgm_chado.organism o ON o.organism_id = f.organism_id
                    WHERE o.common_name = 'dicty' 
                    AND ct.name         = 'pseudogene'
                    GROUP BY f.created_by
                - column: go_annotations
                  name: 'Total GO annotations'
                - column: genes_with_go
                  name: 'Genes with GO'
                - column: phenotypes
                  name: 'Total phenotypes'
                  sql: |
                    SELECT count(*) as c, p.created_by AS curator 
                    FROM cgm_chado.phenotype p 
                    INNER JOIN cgm_chado.curator cr ON cr.name = p.created_by
                    GROUP BY p.created_by
                - column: genes_with_phenotypes
                  name: 'Genes with phenotype(s)'
                  sql: |
                    SELECT COUNT(*) AS c, p.created_by AS curator
                    FROM cgm_chado.v_gene_features g 
                    INNER JOIN cgm_chado.feature_genotype fg ON g.feature_id = fg.feature_id
                    INNER JOIN cgm_chado.phenstatement ph    ON ph.genotype_id = fg.genotype_id
                    INNER JOIN cgm_chado.phenotype p         ON p.phenotype_id=ph.phenotype_id
                    INNER JOIN cgm_chado.curator cr          ON cr.name = p.created_by
                    INNER JOIN cgm_chado.organism o          ON o.organism_id = g.organism_id
                    WHERE o.common_name = 'dicty' 
                    GROUP BY p.created_by
                - column: strains
                  name: 'Total strains'
                  sql: |
                    SELECT COUNT(*) AS c, sc.created_by AS curator
                    FROM cgm_ddb.stock_center sc
                    GROUP BY sc.created_by
                    ORDER BY sc.created_by
                - column: genes_wth_strains
                  name: 'Genes with strain(s)'
                  sql: |
                    SELECT COUNT (*) AS c, cr.name AS curator
                    FROM cgm_chado.curator_feature_genotype cfg
                    INNER JOIN cgm_chado.curator cr
                    ON cfg.curator_id = cr.curator_id
                    GROUP BY cr.name
                - column: papers_curated
                  name: 'Curated papers'
                  sql: |
                    SELECT COUNT(DISTINCT fp.pub_id) AS c, cr.name AS curator
                    FROM cgm_chado.feature_pub fp
                    INNER JOIN cgm_chado.feature_pubprop fpp         ON fp.feature_pub_id = fpp.feature_pub_id
                    INNER JOIN cgm_chado.curator_feature_pubprop cfp ON cfp.feature_pubprop_id = fpp.feature_pubprop_id
                    INNER JOIN cgm_chado.curator cr                  ON cr.curator_id = cfp.curator_id
                    INNER JOIN cgm_chado.cvterm ct                   ON fpp.type_id = ct.cvterm_id
                    INNER JOIN cgm_chado.cv                          ON ct.cv_id   = cv.cv_id
                    WHERE cv.name = 'dictyBase_literature_topic'
                    GROUP BY cr.name
                - column: summary
                  name: 'Genes with summary'
                  sql: |
                    SELECT count ( DISTINCT p.paragraph_no ) AS c, 'CGM_DDB_PFEY' AS curator
                    FROM cgm_ddb.paragraph p 
                    INNER JOIN cgm_chado.featureprop fp ON TO_NUMBER(TO_NCHAR(fp.value)) = p.paragraph_no 
                    INNER JOIN cgm_chado.cvterm ct      ON fp.type_id = ct.cvterm_id 
                    WHERE ct.name = 'paragraph_no' 
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} PF') 
                    AND NOT REGEXP_LIKE(p.paragraph_text, '<summary( paragraph_no="[[:digit:]]*")*>(<curation_status|\[Curation Status)')
                    UNION
                    SELECT COUNT(*) AS c, 'CGM_DDB_PASC' AS curator
                    FROM cgm_ddb.paragraph p 
                    INNER JOIN cgm_chado.featureprop fp ON TO_NUMBER(TO_NCHAR(fp.value)) = p.paragraph_no 
                    INNER JOIN cgm_chado.cvterm ct      ON fp.type_id = ct.cvterm_id 
                    WHERE ct.name = 'paragraph_no' 
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} PG') 
                    AND NOT REGEXP_LIKE(p.paragraph_text, '<summary( paragraph_no="[[:digit:]]*")*>(<curation_status|\[Curation Status)')
                    UNION
                    SELECT COUNT(*) AS c, 'CGM_DDB_KERRY' AS curator
                    FROM cgm_ddb.paragraph p 
                    INNER JOIN cgm_chado.featureprop fp ON TO_NUMBER(TO_NCHAR(fp.value)) = p.paragraph_no 
                    INNER JOIN cgm_chado.cvterm ct      ON fp.type_id = ct.cvterm_id 
                    WHERE ct.name = 'paragraph_no' 
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} KS') 
                    AND NOT REGEXP_LIKE(p.paragraph_text, '<summary( paragraph_no="[[:digit:]]*")*>(<curation_status|\[Curation Status)')
                    UNION
                    SELECT COUNT(*) AS c, 'CGM_DDB_BOBD' AS curator
                    FROM cgm_ddb.paragraph p 
                    INNER JOIN cgm_chado.featureprop fp ON TO_NUMBER(TO_NCHAR(fp.value)) = p.paragraph_no 
                    INNER JOIN cgm_chado.cvterm ct      ON fp.type_id = ct.cvterm_id 
                    WHERE ct.name = 'paragraph_no' 
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} RD') 
                    AND NOT REGEXP_LIKE(p.paragraph_text, '<summary( paragraph_no="[[:digit:]]*")*>(<curation_status|\[Curation Status)')
                - column: comprehensively_annotated
                  name: 'Genes comprehencively annotated'
                  sql: |
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_BOBD' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no'
                    AND p.paragraph_text LIKE '%comprehensively annotated%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} RD')
                    UNION
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_PFEY' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no'
                    AND p.paragraph_text LIKE '%comprehensively annotated%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} PF')
                    UNION
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_PASC' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no' 
                    AND p.paragraph_text LIKE '%comprehensively annotated%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} PG')
                    UNION
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_KERRY' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no'
                    AND p.paragraph_text LIKE '%comprehensively annotated%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} KS')
                - column: basic_annotations
                  name: 'Basic annotations'
                  sql: |
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_BOBD' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no'
                    AND p.paragraph_text LIKE '%Basic annotations%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} RD')
                    UNION
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_PFEY' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no'
                    AND p.paragraph_text LIKE '%Basic annotations%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} PF')
                    UNION
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_PASC' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no' 
                    AND p.paragraph_text LIKE '%Basic annotations%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} PG')
                    UNION
                    SELECT COUNT (fp.feature_id) AS c, 'CGM_DDB_KERRY' AS curator
                    FROM cgm_chado.featureprop fp
                    INNER JOIN cgm_ddb.paragraph p ON TO_NUMBER(TO_NCHAR(fp.value))= p.paragraph_no
                    INNER JOIN cgm_chado.cvterm ct ON fp.type_id = ct.cvterm_id
                    WHERE ct.name = 'paragraph_no'
                    AND p.paragraph_text LIKE '%Basic annotations%'
                    AND REGEXP_LIKE(p.paragraph_text, '[[:digit:]]{2}-[[:alpha:]]{3}-[[:digit:]]{4} KS')
          group_by: curator

